---
title: Cockpit 273
author: garrett
date: '2022-07-06'
tags: cockpit, machines, podman
slug: cockpit-273
category: release
summary: ''
---

Cockpit is the [modern Linux admin interface](https://cockpit-project.org/).
We release regularly.

Here are the release notes from Cockpit 273, cockpit-machines 272, and cockpit-podman 51:


## containers/ws: Support all OpenSSH key types

State: **OPEN** (will not be included) @ <https://github.com/cockpit-project/cockpit/pull/17506>
{:.warn}

Load a provided SSH key into ssh-agent, and let cockpit-ssh use it from
there. This is the same approach that we use with "regular" cockpit and
connecting to remote hosts in the shell.

This drops the restriction that keys must be in the old RSA PEM format. SSH has
moved to the proprietary "OpenSSH" format a few years ago, but openssl (or
anything else other than SSH itself) cannot decrypt these any more.

Unfortunately ssh-add does not allow reading the password from stdin, so
construct and use an askpass agent (similar to Client).

Restrict the lifetime of keys in the agent to 30 seconds. That gives the login
process enough time to connect, but avoids keeping the unencrypted key in
memory indefinitely.

----

  - Builds on top of #17504
  - [x] Refresh official container to pick up the changes here
  - [x] Refresh fedora-coreos image: https://github.com/cockpit-project/bots/issues/3564
  - [x] Rebase, drop the XXX hack commit

## Software Updates: Add "Reboot after completion" switch to update progress page

State: **OPEN** (will not be included) @ <https://github.com/cockpit-project/cockpit/pull/17500>
{:.warn}

TODO

## Metrics: Add CPU temperature to metrics page

State: **OPEN** (will not be included) @ <https://github.com/cockpit-project/cockpit/pull/17160>
{:.warn}

Fixes: #11364

![cpu_temperature_normal]({{ site.baseurl }}/images/273-metrics-add-cpu-temperature-to-metrics-page.png)

![cpu_temperature_warning]({{ site.baseurl }}/images/273-metrics-add-cpu-temperature-to-metrics-page-2.png)

![cpu_temperature_critical]({{ site.baseurl }}/images/273-metrics-add-cpu-temperature-to-metrics-page-3.png)

## Bridge: Add channel redirection

State: **OPEN** (will not be included) @ <https://github.com/cockpit-project/cockpit/pull/14641>
{:.warn}

This adds a "redirect" option to the open command, which takes the name
of the channel the output of the new one will be redirected to. The
redirect is effectively applied as close to the channels as possible.

Closes #14560

---

There are two cases in which the output is redirected from a channel:
- The output is redirected from a local channel. This is handled in `CockpitRouter` by setting the `redirect_target` property of `CockpitChannel`, which uses it to send data to the redirect target instead of the transport in `cockpit_channel_actual_send`.
- The output is redirected from a peer. This is handled in `cockpit_peer_handle` by passing the redirect target as an argument and then by putting the redirect into a hash table with the (source) channel name as a key. `on_other_recv` then looks up the channel name in the table, again sending it to the redirect target instead of the transport if a corresponding entry is present.

Similarly there are two redirect target types: a local channel and a peer. These are handled by different implementations of the `CockpitRedirect` interface - `CockpitChannelRedirect` for local channels (holding a reference to the corresponding `CockpitChannel` object) and `CockpitPeerRedirect` for peers (holding a reference to the transport and the channel name).

Redirection of a channel is attempted on all bridges - the shortest path then takes precedence (e.g. if there is a redirect between two channels on the same peer, it happens on both the parent bridge and the peer, but effectively the data is redirected on the peer and nothing arrives on the parent). This also means it is compatible with older versions of cockpit-bridge - they simply ignore the redirect option and the redirect is done on the parent bridge (this can obviously be slower, but it will work).

I hope this makes sense - it seems like a small, but useful feature to me. (For potential uses see the linked issue.)

## Machines: Downloading RHEL images for new VMs

State: **OPEN** (will not be included) @ <https://github.com/cockpit-project/cockpit-machines/pull/704>
{:.warn}

TODO list (some of it may go to follow-up PRs):
 - [ ] Store offline token for 30 days, so user doesn't have to retype it everytime they want to create a new RHEL VM
 - [ ] Refresh available RHEL versions based on supplied token
 - [ ] Check for validity of  offline token immediately after user supplies it
 - [ ] Add an option to cancel the ongoing image download
 - [ ] Add option to remove downloaded the image
 - [x] Have concensus on image download location (consensus: libvirt default storage pool at /var/lib/libvirt/images)
 - [x] tests

## Podman: Add Volumes and Env Variables to container details

State: **OPEN** (will not be included) @ <https://github.com/cockpit-project/cockpit-podman/pull/1017>
{:.warn}

Following conversation in #923 this adds new tab in container details
which shows ports, mounted volumes and filtered environment variables.

I decided someone might find it useful to check all env variables so I've added `Show more` button which shows all variables.

Default view:
![podman_integration_show_more]({{ site.baseurl }}/images/273-podman-add-volumes-and-env-variables-to-container-details.png)

All variables are shown:
Variables hidden by default are appended to the list.
![podman_integration_show_less]({{ site.baseurl }}/images/273-podman-add-volumes-and-env-variables-to-container-details-2.png)

## Podman: Update ContainerDetails.jsx

State: **OPEN** (will not be included) @ <https://github.com/cockpit-project/cockpit-podman/pull/923>
{:.warn}

Add Network, Volumes and Environment sections to Detailed view


## Try it out

Cockpit 273, cockpit-machines 272, and cockpit-podman 51 are available now:

* [For your Linux system](https://cockpit-project.org/running.html)

* [Cockpit Source Tarball](https://github.com/cockpit-project/cockpit/releases/tag/273)
* [Cockpit Fedora 36](https://bodhi.fedoraproject.org/updates/?releases=F36&packages=cockpit)
* [Cockpit Fedora 35](https://bodhi.fedoraproject.org/updates/?releases=F35&packages=cockpit)
* [Cockpit Client](https://flathub.org/apps/details/org.cockpit_project.CockpitClient)
* [cockpit-machines Source Tarball](https://github.com/cockpit-project/cockpit-machines/releases/tag/272)
* [cockpit-machines Fedora 36](https://bodhi.fedoraproject.org/updates/?releases=F36&packages=cockpit-machines)
* [cockpit-machines Fedora 35](https://bodhi.fedoraproject.org/updates/?releases=F35&packages=cockpit-machines)
* [Cockpit Client](https://flathub.org/apps/details/org.cockpit_project.CockpitClient)
* [cockpit-podman Source Tarball](https://github.com/cockpit-project/cockpit-podman/releases/tag/51)
* [cockpit-podman Fedora 36](https://bodhi.fedoraproject.org/updates/?releases=F36&packages=cockpit-podman)
* [cockpit-podman Fedora 35](https://bodhi.fedoraproject.org/updates/?releases=F35&packages=cockpit-podman)
* [Cockpit Client](https://flathub.org/apps/details/org.cockpit_project.CockpitClient)

*[CPU]: Central Processing Unit, the "brain" of a computer
*[RHEL]: Red Hat Enterprise Linux
*[SSH]: Secure Shell, a common protocol to securely connect to a remote computer
*[VM]: Virtual Machine
*[VMs]: Virtual Machines
---
title: Cockpit 255
author: garrett
date: '2021-10-11'
tags: cockpit, machines
slug: cockpit-255
category: release
summary: ''
---

Cockpit is the [modern Linux admin interface](https://cockpit-project.org/).
We release regularly.

Here are the release notes from Cockpit 255 and cockpit-machines 254:


## Users: Login history

State: **merged** @ <https://github.com/cockpit-project/cockpit/pull/16402>
{:.note}

The user account details page now includes a list of your 15 most recent logins.

![users-login-history]({{ site.baseurl }}/images/255-users-login-history.png)

## Login: Arch Linux Branding

State: **merged** @ <https://github.com/cockpit-project/cockpit/pull/16365>
{:.note}

Cockpit now includes branding for the [Arch Linux distribution](https://archlinux.org/).

![screenshot of arch linux branding]({{ site.baseurl }}/images/255-login-arch-linux-branding.png)

## Webserver: Restrict frame embedding to same origin

State: **merged** @ <https://github.com/cockpit-project/cockpit/pull/16342>
{:.note}

Cockpit's web server now sets the [X-Frame-Options header](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Frame-Options) to explicitly disallow frame embedding within a different origin. Thanks to cookie policy restrictions, this was already prevented in most cases, as embedded frames would always show the login page. With this new option, the browser directly forbids cross-origin embedding and shows an explanatory error page instead. (CVE-2021-3660)

![254-webserver-restrict-frame-embedding-to-same-origin]({{ site.baseurl }}/images/255-webserver-restrict-frame-embedding-to-same-origin.png)

## Overview: Move last login to Health Card

State: **merged** @ <https://github.com/cockpit-project/cockpit/pull/16260>
{:.note}

Previously, last successful or failed logins were shown in a dismissable alert, which took a lot of space. Login information was moved to the Health card.

![screenshot of move last login to health card]({{ site.baseurl }}/images/255-overview-move-last-login-to-health-card.png)


A failed login:

![screenshot of move last login to health card]({{ site.baseurl }}/images/255-overview-move-last-login-to-health-card-2.png)

## bridge: Add channel redirection

State: **OPEN** (will not be included) @ <https://github.com/cockpit-project/cockpit/pull/14641>
{:.warn}

This adds a "redirect" option to the open command, which takes the name
of the channel the output of the new one will be redirected to. The
redirect is effectively applied as close to the channels as possible.

Closes #14560

---

There are two cases in which the output is redirected from a channel:
- The output is redirected from a local channel. This is handled in `CockpitRouter` by setting the `redirect_target` property of `CockpitChannel`, which uses it to send data to the redirect target instead of the transport in `cockpit_channel_actual_send`.
- The output is redirected from a peer. This is handled in `cockpit_peer_handle` by passing the redirect target as an argument and then by putting the redirect into a hash table with the (source) channel name as a key. `on_other_recv` then looks up the channel name in the table, again sending it to the redirect target instead of the transport if a corresponding entry is present.

Similarly there are two redirect target types: a local channel and a peer. These are handled by different implementations of the `CockpitRedirect` interface - `CockpitChannelRedirect` for local channels (holding a reference to the corresponding `CockpitChannel` object) and `CockpitPeerRedirect` for peers (holding a reference to the transport and the channel name).

Redirection of a channel is attempted on all bridges - the shortest path then takes precedence (e.g. if there is a redirect between two channels on the same peer, it happens on both the parent bridge and the peer, but effectively the data is redirected on the peer and nothing arrives on the parent). This also means it is compatible with older versions of cockpit-bridge - they simply ignore the redirect option and the redirect is done on the parent bridge (this can obviously be slower, but it will work).

I hope this makes sense - it seems like a small, but useful feature to me. (For potential uses see the linked issue.)

## Storage: Add support for Stratis

State: **OPEN** (will not be included) @ <https://github.com/cockpit-project/cockpit/pull/14109>
{:.warn}

TODO: Detailed description plus links to upstream Stratis page/docs

![menu]({{ site.baseurl }}/images/255-storage-add-support-for-stratis.png)

![details]({{ site.baseurl }}/images/255-storage-add-support-for-stratis-2.png)

## Support configuring static MAC - IP address mappings in a libvirt network

State: **OPEN** (will not be included) @ <https://github.com/cockpit-project/cockpit-machines/pull/399>
{:.warn}

It is often useful to always assign a specific IPv4 or IPv6 address to a particular VM. This is now possible by adding DHCP host entries in existing virtual networks. These are mappings from a specific MAC address to an IP address.

![screenshot of ## support configuring static mac - ip address mappings in a libvirt network]({{ site.baseurl }}/images/255-support-configuring-static-mac-ip-address-mappings-in-a-libvirt-network.png)

![screenshot of ## support configuring static mac - ip address mappings in a libvirt network]({{ site.baseurl }}/images/255-support-configuring-static-mac-ip-address-mappings-in-a-libvirt-network-2.png)

## Machines: Support adding and removing host devices

State: **merged** @ <https://github.com/cockpit-project/cockpit-machines/pull/226>
{:.note}

Host devices are physical devices on the machine running virtual machines. This includes devices from USB (mice, cameras, keyboards) and PCI (NICs, GPUs). Users can now assign and detach host devices for each VM. 

Please note: When a device is assigned to a VM, it can no longer be used by the host.

![254-machines-support-adding-and-removing-host-devices]({{ site.baseurl }}/images/255-machines-support-adding-and-removing-host-devices.png)
![254-machines-support-adding-and-removing-host-devices-2]({{ site.baseurl }}/images/255-machines-support-adding-and-removing-host-devices-2.png)


## Try it out

Cockpit 255 and cockpit-machines 254 are available now:

* [For your Linux system](https://cockpit-project.org/running.html)

* [Cockpit Source Tarball](https://github.com/cockpit-project/cockpit/releases/tag/255)
* [Cockpit Fedora 35](https://bodhi.fedoraproject.org/updates/?releases=F35&packages=cockpit)
* [Cockpit Fedora 34](https://bodhi.fedoraproject.org/updates/?releases=F34&packages=cockpit)
* [cockpit-machines Source Tarball](https://github.com/cockpit-project/cockpit-machines/releases/tag/254)
* [cockpit-machines Fedora 35](https://bodhi.fedoraproject.org/updates/?releases=F35&packages=cockpit-machines)
* [cockpit-machines Fedora 34](https://bodhi.fedoraproject.org/updates/?releases=F34&packages=cockpit-machines)

*[CI]: continuous integration (testing)
*[HTTP]: Hypertext Transport Protocol
*[NIC]: Network Interface Card
*[USB]: Universal Serial Bus, a protocol for hot-pluggable (and usually external) devices
*[VM]: Virtual Machine
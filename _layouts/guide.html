---
layout:
---
{% capture empty %}
  {% comment %} Cockpit-specific guide template {% endcomment %}

  {% assign html_tag = '<html' %}
  {% assign head_tag = '</head>' %}
  {% assign end_tag = '</head>' %}
  {% assign nav_tag = '<table class="navigation"' %}
  {% assign book_tag = '<div class="book"'%}
  {% assign index_tag = '<h1 class="guides">' %}

  {% assign html_mod = '<html class="cockpit-guide"'%}

  {% capture head_mod %}
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="canonical" href="{{ page.url | replace:'index.html','' | prepend: site.baseurl | prepend: site.url }}">
    <link rel="manifest" href="{{ site.baseurl }}/manifest.json">

    {% assign _favicon = site.static_files | where_exp: "item", "item.path contains '/images/favicon.'" %}
    {% if _favicon[0] %}
      <link rel="shortcut icon" href="{{ _favicon[0].path | prepend: site.baseurl }}" type="image/png">
    {% endif %}

    <link rel="stylesheet" href="{{ "/assets/main.css" | prepend: site.baseurl }}">
    {{ head_tag }}
  {% endcapture %}

  {% capture header_html %}{% include page_header.html %}{% endcapture %}

  {% assign end_mod = end_tag %}

  {% if content contains book_tag %}
    {% assign header_orig = book_tag %}
    {% assign header_mod = book_tag | prepend: header_html %}
  {% elsif content contains index_tag %}
    {% assign header_orig = head_tag %}
    {% assign header_mod = head_tag
      | append: '<body><section class="guide-index">'
      | append: header_html %}
    {% assign end_mod = head_tag
      | prepend: '</section>' %}
  {% else %}
    {% assign header_orig = nav_tag %}
    {% assign header_mod = nav_tag | prepend: header_html %}
  {% endif %}

{%
  endcapture
%}{{ content
  | replace_first: html_tag, html_mod
  | replace_first: head_tag, head_mod
  | replace_first: header_orig, header_mod
  | replace_first: end_tag, end_mod
}}
